{% extends "projects/base.html" %}
{% load static %}

{% block title %}
Monte Carlo Simulator | Data Range Simulations and PDF Graphs
{% endblock title %}

{% block meta_tags %}
  <!-- Meta to prevent caching, which will prevent CSRF token errors. -->
  <meta http-equiv="Cache-Control"  content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma"         content="no-cache">
  <meta http-equiv="Expires"        content="0">

  <meta name="description" content="The Monte Carlo Simulator allows you to take one or two number ranges, randomly generate values within those ranges, select target values, and graph them out onto a PDF file that is downloaded to your computer and placed in your default downloads folder.">
  <meta name="keywords" content="Monte Carlo simulation, data range simulation, statistical modeling, PDF graph download, web-based simulation tool, probability analysis">

  <!-- Open Graph -->
  <meta property="og:url" content="https://www.bencritt.net/projects/monte-carlo-simulator/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Monte Carlo Simulator">
  <meta property="og:description" content="This Monte Carlo simulator can take one or two data ranges, execute a chosen number of simulations, and graph the results onto a PDF that’s downloaded to your device.">
  <meta property="og:image" content="https://www.bencritt.net/static/img/all-projects/monte-carlo-simulator.webp">
  <meta property="og:image:type" content="image/webp">
  <meta property="og:image:alt" content="Monte Carlo Simulator Screenshot">
  <meta property="og:site_name" content="Ben Crittenden">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:domain" content="bencritt.net">
  <meta name="twitter:url" content="https://www.bencritt.net/projects/monte-carlo-simulator/">
  <meta name="twitter:title" content="Monte Carlo Simulator">
  <meta name="twitter:description" content="This Monte Carlo simulator can take one or two data ranges, execute a chosen number of simulations, and graph the results onto a PDF that’s downloaded to your device.">
  <meta name="twitter:image" content="https://www.bencritt.net/static/img/all-projects/monte-carlo-simulator.webp">
  <meta name="twitter:creator" content="@bencritt89">

  <!-- Schema for SEO -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Monte Carlo Simulator",
      "description": "A web-based Monte Carlo Simulator that allows users to perform simulations with one or two data ranges, generate random values, and graph the results in a downloadable PDF format.",
      "url": "https://www.bencritt.net/projects/monte-carlo-simulator/",
      "applicationCategory": "Simulation Software",
      "operatingSystem": "Web-based",
      "image": "https://www.bencritt.net/static/img/all-projects/monte-carlo-simulator.webp",
      "creator": {
        "@type": "Person",
        "name": "Ben Crittenden",
        "url": "https://www.bencritt.net"
      },
      "featureList": [
        "Supports one or two data ranges for simulation.",
        "Generates random values within specified ranges.",
        "Allows setting of target values for precise analysis.",
        "Visualizes results through graphs and exports them as PDFs.",
        "Accessible from any device without installation."
      ],
      "softwareVersion": "1.0",
      "applicationSubCategory": "Statistical Analysis"
    }
  </script>
{% endblock meta_tags %}

{% block link_tags %}
  <link rel="canonical" href="https://www.bencritt.net/projects/monte-carlo-simulator/">
{% endblock link_tags %}

{% block content %}
  <section class="py-4">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-8">

          <header class="text-center mb-4">
            <h1 class="mb-2">Monte Carlo Simulator</h1>
            <p class="text-muted mb-0">
              Run simulations for one or two number ranges and download a PDF graph of the results.
            </p>
          </header>

          <div class="card shadow-sm">
            <div class="card-body">

              {% if form.non_field_errors %}
                <div class="alert alert-danger" role="alert">
                  {{ form.non_field_errors }}
                </div>
              {% endif %}

              <form method="post" action="{% url 'projects:monte_carlo_simulator' %}" novalidate>
                {% csrf_token %}

                {# Radio buttons: keep your same name/value so your JS continues to work. #}
                <fieldset class="mb-3">
                  <legend class="h6 mb-2">Number of ranges</legend>

                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="data-range" id="one-range" value="one" checked>
                    <label class="form-check-label" for="one-range">One range</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="data-range" id="two-ranges" value="two">
                    <label class="form-check-label" for="two-ranges">Two ranges</label>
                  </div>
                </fieldset>

                <div id="one-range-fields">
                  <div class="mb-3">
                    {{ form.sim_quantity.label_tag }}
                    {{ form.sim_quantity }}
                    {% if form.sim_quantity.errors %}
                      <div class="invalid-feedback d-block">{{ form.sim_quantity.errors }}</div>
                    {% endif %}
                  </div>

                  <div class="mb-3">
                    {{ form.min_val.label_tag }}
                    {{ form.min_val }}
                    {% if form.min_val.errors %}
                      <div class="invalid-feedback d-block">{{ form.min_val.errors }}</div>
                    {% endif %}
                  </div>

                  <div class="mb-3">
                    {{ form.max_val.label_tag }}
                    {{ form.max_val }}
                    {% if form.max_val.errors %}
                      <div class="invalid-feedback d-block">{{ form.max_val.errors }}</div>
                    {% endif %}
                  </div>

                  <div class="mb-3">
                    {{ form.target_val.label_tag }}
                    {{ form.target_val }}
                    {% if form.target_val.errors %}
                      <div class="invalid-feedback d-block">{{ form.target_val.errors }}</div>
                    {% endif %}
                  </div>
                </div>

                <div id="two-range-fields" class="d-none">
                  <hr class="my-4">

                  <div class="mb-3">
                    {{ form.second_sim_quantity.label_tag }}
                    {{ form.second_sim_quantity }}
                    {% if form.second_sim_quantity.errors %}
                      <div class="invalid-feedback d-block">{{ form.second_sim_quantity.errors }}</div>
                    {% endif %}
                  </div>

                  <div class="mb-3">
                    {{ form.second_min_val.label_tag }}
                    {{ form.second_min_val }}
                    {% if form.second_min_val.errors %}
                      <div class="invalid-feedback d-block">{{ form.second_min_val.errors }}</div>
                    {% endif %}
                  </div>

                  <div class="mb-3">
                    {{ form.second_max_val.label_tag }}
                    {{ form.second_max_val }}
                    {% if form.second_max_val.errors %}
                      <div class="invalid-feedback d-block">{{ form.second_max_val.errors }}</div>
                    {% endif %}
                  </div>

                  <div class="mb-3">
                    {{ form.second_target_val.label_tag }}
                    {{ form.second_target_val }}
                    {% if form.second_target_val.errors %}
                      <div class="invalid-feedback d-block">{{ form.second_target_val.errors }}</div>
                    {% endif %}
                  </div>
                </div>

                <div class="d-grid gap-2">
                  <input
                    type="submit"
                    id="monte-carlo-btn"
                    class="btn btn-primary"
                    value="Run Simulation"
                    aria-label="Run Simulation">
                </div>
              </form>

              <p class="text-muted small mt-3 mb-0">
                Your graph will be downloaded and placed into your default downloads folder.
              </p>

            </div>
          </div>

          <div class="text-center mt-4">
            <a
              href="https://github.com/BenCritt/profile_workspace_heroku"
              target="_blank"
              rel="noopener noreferrer"
              data-bs-toggle="tooltip"
              title="View the source code for this app."
              class="btn btn-outline-secondary">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-github me-1" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
              </svg>
              View source on GitHub
            </a>

            <div class="mx-auto" style="max-width: 750px;">
              <p class="mt-3 text-muted small mb-0">
                This tool was created by
                <a href="/" class="content-link" title="Ben Crittenden – IT Professional">Ben Crittenden</a>,
                an IT professional with experience in web development, systems administration, and project management.
              </p>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>

  {# Page-specific JS: keep it close to where it's used; avoids relying on a base-level scripts block. #}
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const one = document.getElementById('one-range-fields');
      const two = document.getElementById('two-range-fields');
      const radios = document.querySelectorAll('input[name="data-range"]');

      function toggleFields(value) {
        const showTwo = value === 'two';
        if (two) two.classList.toggle('d-none', !showTwo);
        // 'one' fields are always visible (as in your original).
      }

      const selected = document.querySelector('input[name="data-range"]:checked');
      if (selected) toggleFields(selected.value);

      radios.forEach(radio => {
        radio.addEventListener('change', e => toggleFields(e.target.value));
      });
    });
  </script>
{% endblock content %}