{% extends "projects/base.html" %}
{% load static %}

{% block title %}
Ham Radio Call Sign Lookup | Look Up Amateur Radio Call Signs
{% endblock title %}

{% block meta_tags %}
  <!-- Prevent browser caching to avoid stale CSRF tokens -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <!-- SEO fundamentals -->
  <meta name="description" content="Free, instant lookup for any U.S. amateur-radio call-sign. See class, expiry, FRN, grid square and more.">
  <meta name="keywords" content="ham radio call sign lookup, amateur radio licence lookup, FCC call sign search, ham callsign checker, amateur radio lookup, FCC licence database">

  <!-- Open Graph -->
  <meta property="og:url" content="https://www.bencritt.net/projects/ham-radio-call-sign-lookup/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Ham Radio Call Sign Lookup | Look Up Amateur Radio Call Signs">
  <meta property="og:description" content="Free, instant lookup for any U.S. amateur-radio call-sign. See class, expiry, FRN, grid square and more.">
  <meta property="og:image" content="https://www.bencritt.net/static/img/all-projects/ham-radio-call-sign-lookup.webp">
  <meta property="og:image:type" content="image/webp">
  <meta property="og:image:alt" content="Ham Radio Call Sign Lookup Screenshot">
  <meta property="og:site_name" content="Ben Crittenden">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:domain" content="bencritt.net">
  <meta name="twitter:url" content="https://www.bencritt.net/projects/ham-radio-call-sign-lookup/">
  <meta name="twitter:title" content="Ham Radio Call Sign Lookup | Look Up Amateur Radio Call Signs">
  <meta name="twitter:description" content="Free, instant lookup for any U.S. amateur-radio call-sign. See class, expiry, FRN, grid square and more.">
  <meta name="twitter:image" content="https://www.bencritt.net/static/img/all-projects/ham-radio-call-sign-lookup.webp">
  <meta name="twitter:creator" content="@bencritt89">

  <!-- Schema for SEO -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Ham Radio Call Sign Lookup",
      "alternateName": ["FCC Call Sign Search", "Amateur Radio Licence Checker"],
      "description": "Free, instant lookup for any U.S. amateur-radio call-sign. See class, expiry, FRN, grid square and more.",
      "url": "https://www.bencritt.net/projects/ham-radio-call-sign-lookup/",
      "applicationCategory": "Utility",
      "operatingSystem": "Web-based",
      "image": "https://www.bencritt.net/static/img/all-projects/ham-radio-call-sign-lookup.webp",
      "creator": {
        "@type": "Person",
        "name": "Ben Crittenden",
        "url": "https://www.bencritt.net"
      },
      "featureList": [
        "Real-time FCC licence status",
        "Licence class & expiry date",
        "Grid-square and lat/lon location",
        "FRN, grant & last-action dates",
        "Trustee / club details when available"
      ],
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
  </script>
{% endblock meta_tags %}

{% block link_tags %}
  <!-- Canonical link to help avoid duplicate content issues. -->
  <link rel="canonical" href="https://www.bencritt.net/projects/ham-radio-call-sign-lookup/">

  <!-- Page-specific CSS -->
  <link href="{% static 'template-css/ham-radio-call-sign-lookup-css.css' %}" rel="stylesheet">
{% endblock link_tags %}

{% block content %}
  <section class="py-4">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-8">

          <header class="text-center mb-4">
            <h1 class="mb-2">Ham Radio Call Sign Lookup</h1>
            <p class="mb-0 text-muted">
              Free, instant lookup for any U.S. amateur-radio call-sign.
            </p>
          </header>

          <div class="card shadow-sm">
            <div class="card-body">
              {% if form.non_field_errors %}
                <div class="alert alert-danger" role="alert">
                  {{ form.non_field_errors }}
                </div>
              {% endif %}

              <form method="post" class="d-flex flex-column gap-2" novalidate>
                {% csrf_token %}
                {{ form.as_p }}

                <div class="d-grid gap-2">
                  <button type="submit" class="btn btn-primary" aria-label="Look Up Call Sign">
                    Look Up Call Sign
                  </button>
                </div>
              </form>

              {% if error %}
                <div class="alert alert-danger text-center mt-3 mb-0" role="alert">
                  {{ error }}
                </div>
              {% endif %}
            </div>
          </div>

          {% if data and data.status == "VALID" %}
            <div class="card shadow-sm mt-4">
              <div class="card-body">
                <h2 class="h4 mb-3">
                  {{ data.current.callsign }}
                  <span class="badge bg-success align-middle">{{ data.status }}</span>
                </h2>

                <dl class="row mb-0">
                  <dt class="col-5 col-md-3">Name</dt>
                  <dd class="col-7 col-md-9">{{ data.name }}</dd>

                  <dt class="col-5 col-md-3">Class</dt>
                  <dd class="col-7 col-md-9">{{ data.current.operClass|default:"—" }}</dd>

                  <dt class="col-5 col-md-3">Type</dt>
                  <dd class="col-7 col-md-9">{{ data.type|default:"—" }}</dd>

                  <dt class="col-5 col-md-3">Expires</dt>
                  <dd class="col-7 col-md-9">{{ data.otherInfo.expiryDate|default:"—" }}</dd>

                  <dt class="col-5 col-md-3">Grid</dt>
                  <dd class="col-7 col-md-9">{{ data.location.gridsquare|default:"—" }}</dd>

                  <dt class="col-5 col-md-3">Latitude / Longitude</dt>
                  <dd class="col-7 col-md-9">
                    {{ data.location.latitude|floatformat:4 }},&nbsp;{{ data.location.longitude|floatformat:4 }}

                    {% if data.location.latitude %}
                      <a
                        class="btn btn-sm btn-outline-secondary ms-2"
                        href="https://www.google.com/maps/search/?api=1&query={{ data.location.latitude }},{{ data.location.longitude }}"
                        target="_blank"
                        rel="noopener noreferrer">
                        Map
                      </a>
                    {% endif %}
                  </dd>
                </dl>
              </div>
            </div>

            <div class="accordion mt-3" id="lookupAcc">

              <!-- Regulatory -->
              <div class="accordion-item">
                <h2 class="accordion-header" id="regHead">
                  <button class="accordion-button collapsed" type="button"
                          data-bs-toggle="collapse" data-bs-target="#regBody"
                          aria-expanded="false" aria-controls="regBody">
                    Regulatory
                  </button>
                </h2>

                <div id="regBody" class="accordion-collapse collapse" aria-labelledby="regHead" data-bs-parent="#lookupAcc">
                  <div class="accordion-body">
                    <dl class="row mb-0">

                      <dt class="col-5 col-md-3">
                        FRN
                        {% if data.otherInfo.frn %}
                          <button
                            type="button"
                            class="btn btn-link p-0 ms-1"
                            onclick="navigator.clipboard.writeText('{{ data.otherInfo.frn }}')"
                            title="Copy FRN"
                            aria-label="Copy FRN">
                            <i class="bi bi-clipboard"></i>
                          </button>
                        {% endif %}
                      </dt>
                      <dd class="col-7 col-md-9">{{ data.otherInfo.frn|default:"—" }}</dd>

                      <dt class="col-5 col-md-3">Grant date</dt>
                      <dd class="col-7 col-md-9">{{ data.otherInfo.grantDate|default:"—" }}</dd>

                      <dt class="col-5 col-md-3">Last action</dt>
                      <dd class="col-7 col-md-9">{{ data.otherInfo.lastActionDate|default:"—" }}</dd>

                      <dt class="col-5 col-md-3">Radio service</dt>
                      <dd class="col-7 col-md-9">{{ data.otherInfo.service|default:"—" }}</dd>

                      <dt class="col-5 col-md-3">ULS record</dt>
                      <dd class="col-7 col-md-9">
                        {% if data.otherInfo.ulsUrl %}
                          <a href="{{ data.otherInfo.ulsUrl }}" target="_blank" rel="noopener noreferrer">View on ULS</a>
                        {% else %}
                          —
                        {% endif %}
                      </dd>
                    </dl>
                  </div>
                </div>
              </div>

              <!-- Trustee info -->
              {% if data.trustee.callsign %}
                <div class="accordion-item">
                  <h2 class="accordion-header" id="trustHead">
                    <button class="accordion-button collapsed" type="button"
                            data-bs-toggle="collapse" data-bs-target="#trustBody"
                            aria-expanded="false" aria-controls="trustBody">
                      Trustee / Club Details
                    </button>
                  </h2>

                  <div id="trustBody" class="accordion-collapse collapse" aria-labelledby="trustHead" data-bs-parent="#lookupAcc">
                    <div class="accordion-body">
                      <dl class="row mb-0">
                        <dt class="col-5 col-md-3">Trustee</dt>
                        <dd class="col-7 col-md-9">{{ data.trustee.callsign }} – {{ data.trustee.name }}</dd>

                        <dt class="col-5 col-md-3">Previous callsign</dt>
                        <dd class="col-7 col-md-9">{{ data.previous.callsign|default:"—" }}</dd>

                        <dt class="col-5 col-md-3">Previous class</dt>
                        <dd class="col-7 col-md-9">{{ data.previous.operClass|default:"—" }}</dd>
                      </dl>
                    </div>
                  </div>
                </div>
              {% endif %}

              <!-- Mailing address -->
              {% if data.address.line1 %}
                <div class="accordion-item">
                  <h2 class="accordion-header" id="addrHead">
                    <button class="accordion-button collapsed" type="button"
                            data-bs-toggle="collapse" data-bs-target="#addrBody"
                            aria-expanded="false" aria-controls="addrBody">
                      Mailing Address
                    </button>
                  </h2>

                  <div id="addrBody" class="accordion-collapse collapse" aria-labelledby="addrHead" data-bs-parent="#lookupAcc">
                    <div class="accordion-body">
                      {{ data.address.line1 }}<br>
                      {{ data.address.line2 }}<br>
                      {{ data.address.attn }}
                    </div>
                  </div>
                </div>
              {% endif %}
            </div>

          {% elif data and data.status != "VALID" %}
            <div class="alert alert-danger text-center mt-3" role="alert">
              “{{ form.data.callsign|default:"(blank)" }}” is not a valid call-sign.
            </div>
          {% endif %}

          <div class="text-center mt-4">
            <a
              href="https://github.com/BenCritt/profile_workspace_heroku"
              target="_blank"
              rel="noopener noreferrer"
              class="btn btn-outline-secondary"
              data-bs-toggle="tooltip"
              title="View the source code for this app.">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-github me-1" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
              </svg>
              View source on GitHub
            </a>

            <p class="mt-3 text-muted small mb-0">
              This tool was created by
              <a href="https://www.bencritt.net/" class="content-link" title="Ben Crittenden – IT Professional">Ben Crittenden</a>,
              an IT professional with experience in web development, systems administration, and project management.
            </p>
          </div>

        </div>
      </div>
    </div>
  </section>
{% endblock content %}