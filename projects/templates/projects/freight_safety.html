{% extends "projects/base.html" %}
{% load static %}

{% block title %}
Freight Carrier Safety Reporter | Generate Comprehensive Safety Reports for Freight Carriers
{% endblock title %}

{% block meta_tags %}
  {# Meta to prevent caching (kept because you intentionally added it). #}
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <meta name="description" content="The Freight Carrier Safety Reporter allows users to generate comprehensive safety reports for freight carriers, providing safety scores based on crash statistics, inspections, and safety ratings. Ideal for freight brokers and assessing carrier performance.">
  <meta name="keywords" content="Freight Carrier Safety, Carrier Safety Reports, Safety Score, Crash Statistics, Driver Inspections, Carrier Performance, USDOT Number, Freight Brokers">

  {# Open Graph #}
  <meta property="og:url" content="https://www.bencritt.net/projects/freight-safety/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Freight Carrier Safety Reporter">
  <meta property="og:description" content="Generate comprehensive safety reports for freight carriers, calculate safety scores, and retrieve important safety information for freight operations.">
  <meta property="og:image" content="https://www.bencritt.net/static/img/all-projects/freight-safety.webp">
  <meta property="og:image:type" content="image/webp">
  <meta property="og:image:alt" content="Freight Carrier Safety Reporter Screenshot">
  <meta property="og:site_name" content="Ben Crittenden">

  {# Twitter #}
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:domain" content="bencritt.net">
  <meta name="twitter:url" content="https://www.bencritt.net/projects/freight-safety/">
  <meta name="twitter:title" content="Freight Carrier Safety Reporter">
  <meta name="twitter:description" content="Generate safety reports and scores for freight carriers, with insights into crash statistics, driver inspections, and safety ratings.">
  <meta name="twitter:image" content="https://www.bencritt.net/static/img/all-projects/freight-safety.webp">
  <meta name="twitter:creator" content="@bencritt89">

  {# JSON-LD belongs in head (via meta_tags in your base). #}
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Freight Safety Tool",
      "description": "Generate safety reports and scores for freight carriers, including safety ratings, crash statistics, and driver inspections.",
      "url": "https://www.bencritt.net/projects/freight-safety/",
      "applicationCategory": "Transportation Utility",
      "operatingSystem": "Web-based",
      "image": "https://www.bencritt.net/static/img/all-projects/freight-safety.webp",
      "creator": {
        "@type": "Person",
        "name": "Ben Crittenden",
        "url": "https://www.bencritt.net"
      },
      "featureList": [
        "Generate comprehensive safety reports for freight carriers.",
        "Calculate safety scores based on crash statistics, inspections, and safety ratings.",
        "Retrieve detailed safety-related information for carriers using USDOT numbers.",
        "Accessible via any web-enabled device with a user-friendly interface.",
        "Developed with Python and Django for reliable safety report generation."
      ]
    }
  </script>
{% endblock meta_tags %}

{% block link_tags %}
  <link rel="canonical" href="https://www.bencritt.net/projects/freight-safety/">
  <link href="{% static 'template-css/freight-safety-css.css' %}" rel="stylesheet">
{% endblock link_tags %}

{% block content %}
  <section class="py-4">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-8">

          <header class="text-center mb-4">
            <h1 class="mb-3">Freight Carrier Safety Reporter</h1>

            <div class="alert alert-warning text-start mb-0" role="alert">
              <strong>NOTICE:</strong>
              The Federal Motor Carrier Safety Administration's QCMobile API, which this app relies on, has become unreliable.
              Their developer website is also sporadically up or down. If you receive an error after entering a valid DOT number, this is why.
            </div>
          </header>

          <div class="card shadow-sm">
            <div class="card-body">
              <form method="post" novalidate>
                {% csrf_token %}
                {{ form.as_p }}

                <div class="d-grid gap-2">
                  <input
                    type="submit"
                    id="freight-lookup-btn"
                    class="btn btn-primary"
                    value="Generate Safety Report"
                    aria-label="Generate Safety Report">
                </div>
              </form>

              {% if error %}
                <div class="alert alert-danger mt-3 mb-0" role="alert">
                  {{ error }}
                </div>
              {% endif %}
            </div>
          </div>

          {% if carrier %}
            <section class="mt-4">
              <div class="text-center mb-3">
                <p class="mb-1">Freight Carrier Safety Report for:</p>
                <p class="fs-5 fw-semibold mb-0">{{ carrier.name }}</p>
              </div>

              <h2 class="h4 mt-4">Basic Carrier Information</h2>
              <div class="table-responsive">
                <table class="table">
                  <tbody>
                    <tr><th scope="row">Physical Address</th><td>{{ carrier.phyStreet }}, {{ carrier.phyCity }}, {{ carrier.phyState }} {{ carrier.phyZipcode }}</td></tr>
                    <tr><th scope="row">USDOT Number</th><td>{{ carrier.dotNumber }}</td></tr>
                    <tr><th scope="row">MC Number</th><td>{{ carrier.mcNumber }}</td></tr>
                    <tr><th scope="row">Employer Identification Number (EIN)</th><td>{{ carrier.ein }}</td></tr>
                    <tr><th scope="row">Allowed to Operate</th><td>{{ carrier.allowedToOperate }}</td></tr>
                    <tr><th scope="row">BIPD Insurance on File</th><td>{{ carrier.bipdInsuranceOnFile }}</td></tr>
                    <tr><th scope="row">BIPD Insurance Required</th><td>{{ carrier.bipdInsuranceRequired }}</td></tr>
                    <tr><th scope="row">Bond Insurance on File</th><td>{{ carrier.bondInsuranceOnFile }}</td></tr>
                    <tr><th scope="row">Broker Authority Status</th><td>{{ carrier.brokerAuthorityStatus }}</td></tr>
                    <tr><th scope="row">Cargo Insurance on File</th><td>{{ carrier.cargoInsuranceOnFile }}</td></tr>
                    <tr><th scope="row">Carrier Operation Code</th><td>{{ carrier.carrierOperationCode }}</td></tr>
                    <tr><th scope="row">Carrier Operation Description</th><td>{{ carrier.carrierOperationDesc }}</td></tr>
                    <tr><th scope="row">Common Authority Status</th><td>{{ carrier.commonAuthorityStatus }}</td></tr>
                    <tr><th scope="row">Contract Authority Status</th><td>{{ carrier.contractAuthorityStatus }}</td></tr>
                    <tr><th scope="row">Review Date</th><td>{{ carrier.reviewDate }}</td></tr>
                    <tr><th scope="row">Total Drivers</th><td>{{ carrier.totalDrivers }}</td></tr>
                    <tr><th scope="row">Total Power Units</th><td>{{ carrier.totalPowerUnits }}</td></tr>
                  </tbody>
                </table>
              </div>

              <h2 class="h4 mt-4">Safety Report</h2>
              <div class="table-responsive">
                <table class="table">
                  <tbody>
                    <tr><th scope="row">Total Crashes</th><td>{{ carrier.crashTotal }}</td></tr>
                    <tr><th scope="row">Total Driver Inspections</th><td>{{ carrier.driverInsp }}</td></tr>
                    <tr><th scope="row">Total Driver Out-of-Service Inspections</th><td>{{ carrier.driverOosInsp }}</td></tr>
                    <tr><th scope="row">Driver Out-of-Service Rate</th><td>{{ carrier.driverOosRate }}</td></tr>
                    <tr><th scope="row">Total Fatal Crashes</th><td>{{ carrier.fatalCrash }}</td></tr>
                    <tr><th scope="row">Total Injury Crashes</th><td>{{ carrier.injCrash }}</td></tr>
                    <tr><th scope="row">Towaway Crashes</th><td>{{ carrier.towawayCrash }}</td></tr>
                    <tr><th scope="row">Total Hazmat Inspections</th><td>{{ carrier.hazmatInsp }}</td></tr>
                    <tr><th scope="row">Total Hazmat Out-of-Service Inspections</th><td>{{ carrier.hazmatOosInsp }}</td></tr>
                    <tr><th scope="row">Hazmat Out-of-Service Rate</th><td>{{ carrier.hazmatOosRate }}</td></tr>
                    <tr><th scope="row">Total Vehicle Inspections</th><td>{{ carrier.vehicleInsp }}</td></tr>
                    <tr><th scope="row">Total Vehicle Out-of-Service Inspections</th><td>{{ carrier.vehicleOosInsp }}</td></tr>
                    <tr><th scope="row">Vehicle Out-of-Service Rate</th><td>{{ carrier.vehicleOosRate }}</td></tr>
                    <tr><th scope="row">FMCSA Safety Rating</th><td>{{ carrier.safetyRating }}</td></tr>
                    <tr><th scope="row">FMCSA Safety Rating Date</th><td>{{ carrier.safetyRatingDate }}</td></tr>
                  </tbody>
                </table>
              </div>

              <div class="text-center mt-4">
                <a
                  href="https://github.com/BenCritt/profile_workspace_heroku"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="btn btn-outline-secondary"
                  data-bs-toggle="tooltip"
                  title="View the source code for this app.">
                  View source on GitHub
                </a>
              </div>
            </section>
          {% endif %}

        </div>
      </div>
    </div>
  </section>
{% endblock content %}