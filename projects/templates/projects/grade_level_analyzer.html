{% extends "projects/base.html" %}
{% load static %}

{% block title %}
Grade Level Text Analyzer | Check Readability Scores Online
{% endblock title %}

{% block meta_tags %}
  {# Meta to prevent caching, which you use to help avoid CSRF/session weirdness. #}
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <meta name="description" content="Use the Grade Level Text Analyzer to determine the readability of your text. Our tool calculates Flesch-Kincaid, Gunning Fog, and Coleman-Liau scores, providing uniform and weighted averages for accurate grade level assessment.">
  <meta name="keywords" content="text readability, grade level analysis, readability scores, Flesch-Kincaid, Gunning Fog, Coleman-Liau, text analysis tool">

  {# Open Graph #}
  <meta property="og:url" content="https://www.bencritt.net/projects/grade-level-analyzer/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Grade Level Text Analyzer">
  <meta property="og:description" content="Analyze text readability using Flesch-Kincaid, Gunning Fog, and Coleman-Liau. Get individual scores plus uniform and weighted averages.">
  <meta property="og:image" content="https://www.bencritt.net/static/img/all-projects/grade-level-text-analyzer.webp">
  <meta property="og:image:type" content="image/webp">
  <meta property="og:image:alt" content="Grade Level Text Analyzer Screenshot">
  <meta property="og:site_name" content="Ben Crittenden">

  {# Twitter #}
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:domain" content="bencritt.net">
  <meta name="twitter:url" content="https://www.bencritt.net/projects/grade-level-analyzer/">
  <meta name="twitter:title" content="Grade Level Text Analyzer">
  <meta name="twitter:description" content="Analyze text readability using Flesch-Kincaid, Gunning Fog, and Coleman-Liau. Includes uniform and weighted averages.">
  <meta name="twitter:image" content="https://www.bencritt.net/static/img/all-projects/grade-level-text-analyzer.webp">
  <meta name="twitter:creator" content="@bencritt89">

  {# JSON-LD: best placed in head. Your base.html puts meta_tags in head. #}
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Grade Level Text Analyzer",
      "description": "A web-based application to analyze text readability using Flesch-Kincaid, Gunning Fog, and Coleman-Liau indices, including uniform and weighted averages.",
      "url": "https://www.bencritt.net/projects/grade-level-analyzer/",
      "applicationCategory": "Educational Software",
      "operatingSystem": "Web-based",
      "image": "https://www.bencritt.net/static/img/all-projects/grade-level-text-analyzer.webp",
      "creator": {
        "@type": "Person",
        "name": "Ben Crittenden",
        "url": "https://www.bencritt.net"
      },
      "featureList": [
        "Calculates readability scores using Flesch-Kincaid, Gunning Fog, and Coleman-Liau indices.",
        "Provides uniform and weighted averages for comprehensive text analysis.",
        "User-friendly interface with quick processing."
      ]
    }
  </script>
{% endblock meta_tags %}

{% block link_tags %}
  <link rel="canonical" href="https://www.bencritt.net/projects/grade-level-analyzer/">
  {# Keep your existing results CSS (safe even when results are not shown). #}
  <link href="{% static 'template-css/grade-level-results-css.css' %}" rel="stylesheet">
{% endblock link_tags %}

{% block content %}
  <section class="py-4">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-8">

          <header class="text-center mb-4">
            <h1 class="mb-2">Grade Level Text Analyzer</h1>
            <p class="mb-0">
              Submit an excerpt from your text below. Your sample must be between <strong>1,200</strong> and <strong>10,000</strong> characters.
            </p>
          </header>

          {# Form card #}
          <div class="card shadow-sm mb-4">
            <div class="card-body">

              {% if form.non_field_errors %}
                <div class="alert alert-danger" role="alert">
                  {{ form.non_field_errors }}
                </div>
              {% endif %}

              <form method="post" action="{% url 'projects:grade_level_analyzer' %}" novalidate>
                {% csrf_token %}

                {% if form.text.errors %}
                  <div class="alert alert-danger" role="alert">
                    {{ form.text.errors }}
                  </div>
                {% endif %}

                <div class="mb-3">
                  {{ form.text }}
                </div>

                <div class="d-grid gap-2">
                  <input
                    type="submit"
                    id="txt-analyze-btn"
                    class="btn btn-primary"
                    value="Analyze Sample Text"
                    aria-label="Analyze Sample Text">
                </div>
              </form>

            </div>
          </div>

          {# RESULTS (only appear after a successful POST → redirect) #}
          {% if results %}
            <header class="text-center mb-3">
              <p class="mb-0">Analysis results:</p>
            </header>

            <div class="card shadow-sm mb-4">
              <div class="card-body">
                <h2 class="h5 mb-3">Readability Scores</h2>

                <div class="table-responsive">
                  <table class="table table-bordered mb-0">
                    <thead>
                      <tr>
                        <th scope="col">Readability Test</th>
                        <th scope="col">Score</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th scope="row">Flesch-Kincaid Grade Level</th>
                        <td>{{ results.flesch_kincaid_grade }}</td>
                      </tr>
                      <tr>
                        <th scope="row">Gunning Fog Index</th>
                        <td>{{ results.gunning_fog }}</td>
                      </tr>
                      <tr>
                        <th scope="row">Coleman-Liau Index</th>
                        <td>{{ results.coleman_liau_index }}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="card shadow-sm mb-4">
              <div class="card-body">
                <h2 class="h5 mb-3">Averages</h2>

                <div class="table-responsive">
                  <table class="table table-bordered mb-0">
                    <thead>
                      <tr>
                        <th scope="col">Average</th>
                        <th scope="col">Score</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th scope="row">Weighted</th>
                        <td><strong>{{ results.average_score }}</strong></td>
                      </tr>
                      <tr>
                        <th scope="row">Uniform</th>
                        <td><strong>{{ results.uniform_average_score }}</strong></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <div class="d-grid gap-2 d-sm-flex justify-content-sm-center mt-3">
                  <a
                    class="btn btn-outline-secondary"
                    href="{% url 'projects:grade_level_analyzer' %}"
                    aria-label="Analyze Another Text">
                    Analyze Another Text
                  </a>
                </div>
              </div>
            </div>
          {% endif %}

          <div class="text-center mt-4">
            <a
              href="https://github.com/BenCritt/profile_workspace_heroku"
              target="_blank"
              rel="noopener noreferrer"
              class="btn btn-outline-secondary"
              data-bs-toggle="tooltip"
              title="View the source code for this app.">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-github me-1" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
              </svg>
              View source on GitHub
            </a>
          </div>

          <p class="mt-3 text-muted small text-center">
            This tool was created by
            <a href="https://www.bencritt.net/" class="content-link" title="Ben Crittenden – IT Professional">Ben Crittenden</a>,
            an IT professional with experience in web development, systems administration, and project management.
          </p>

        </div>
      </div>
    </div>
  </section>
{% endblock content %}